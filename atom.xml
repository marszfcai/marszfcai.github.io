<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://marszfcai.github.io</id>
    <title>Marszfcai</title>
    <updated>2019-10-04T01:43:40.189Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://marszfcai.github.io"/>
    <link rel="self" href="https://marszfcai.github.io/atom.xml"/>
    <subtitle>温故而知新</subtitle>
    <logo>https://marszfcai.github.io/images/avatar.png</logo>
    <icon>https://marszfcai.github.io/favicon.ico</icon>
    <rights>All rights reserved 2019, Marszfcai</rights>
    <entry>
        <title type="html"><![CDATA[JDK8--元空间(Metaspace)替换永久代(PermGen)]]></title>
        <id>https://marszfcai.github.io/post/jdk8-metaspace-to-permgen</id>
        <link href="https://marszfcai.github.io/post/jdk8-metaspace-to-permgen">
        </link>
        <updated>2019-10-03T01:42:52.000Z</updated>
        <summary type="html"><![CDATA[<p>JDK8起，Hotspot JVM 废弃永久代，同时将类元数据移动到本地内存（Metaspace），而字符串常量池以及类的静态变量则存储在堆区</p>
]]></summary>
        <content type="html"><![CDATA[<p>JDK8起，Hotspot JVM 废弃永久代，同时将类元数据移动到本地内存（Metaspace），而字符串常量池以及类的静态变量则存储在堆区</p>
<!-- more -->
<h4 id="原因">原因</h4>
<ul>
<li>新类元数据的分配将受可用本机内存量的限制，而不是固定的由-XX：MaxPermSize参数指定的值，无论是默认值还是在命令行中指定的值。</li>
<li>简化 Full GC 的前置（JEP 156）</li>
<li>合并JRockit的一部分，JRockit没有永久代</li>
</ul>
<h4 id="风险">风险</h4>
<p>将内部字符串和类静态变量移至Java堆可能会导致内存不足异常或GC数量增加。用户可能需要对-Xmx进行一些调整。</p>
<h2 id="参考资料">参考资料</h2>
<ul>
<li>
<p><a href="http://openjdk.java.net/jeps/122">官方说明 JEP122</a></p>
</li>
<li>
<p><a href="https://www.cnblogs.com/yulei126/p/6777323.html">JDK8-废弃永久代（PermGen）迎来元空间（Metaspace）</a></p>
</li>
<li>
<p><a href="https://www.cnblogs.com/williamjie/p/9558094.html">Metaspace 之一：Metaspace整体介绍（永久代被替换原因、元空间特点、元空间内存查看分析方法）</a></p>
</li>
<li>
<p><a href="https://mp.weixin.qq.com/s/jqfppqqd98DfAJHZhFbmxA">JVM参数MetaspaceSize的误解</a></p>
</li>
<li>
<p><a href="https://cloud.tencent.com/developer/article/1356779">MetaspaceSize和MaxMetaspaceSize的理解</a></p>
</li>
</ul>
]]></content>
    </entry>
</feed>